# --- HOST CONFIGURATION ---
# Export current user IDs so Docker Compose (in subfolders) can use them
export UID=$(id -u)
export GID=$(id -g)

# --- PROXMOX CONNECTION ---
export PROXMOX_HOST="{{IP Address of Proxmox Host}}"
export PROXMOX_USER="root"
# This acts as a default. Ansible will use this to connect initially.
export PROXMOX_PASS="{{Initial Root Password of Proxmox Host}}" 
export PROXMOX_MAC="{{MAC Address of Proxmox Host}}"
export GATEWAY="{{Gateway IP Address}}"

# --- TERRAFORM CONFIGURATION ---
export TF_VAR_proxmox_api_endpoint="https://${PROXMOX_HOST}:8006/api2/json"
# The token will be appended below by Ansible...

# --- OPNsense POST-BOOT CONFIG ---
# OPNsense starts on 192.168.1.1 by default; these are used by the post-boot playbook
export OPNSENSE_HOST="192.168.1.1"
export OPNSENSE_USER="root"
export OPNSENSE_PASS="opnsense"
export OPNSENSE_PORT="22"
# Desired LAN network (post-boot target)
export OPNSENSE_LAN_IP="10.0.0.1"
export OPNSENSE_LAN_MASK="24"

# --- OPNsense CLOUD-INIT ADMIN USER ---
# Admin user credentials for OPNsense web UI
export OPNSENSE_ADMIN_USER="admin"
export OPNSENSE_ADMIN_PASSWORD="changeme_please"

# --- DOCKER HOSTS CONFIGURATION ---
export TF_VAR_proxmox_node="pve"
export TF_VAR_proxmox_storage="local-zfs"
export TF_VAR_ssh_public_key="$(cat ~/.ssh/ansible_homelab.pub 2>/dev/null || echo 'REPLACE_WITH_YOUR_SSH_PUBLIC_KEY')"
export TF_VAR_gateway="10.0.0.1"
export TF_VAR_nameserver="10.0.0.1"
export TF_VAR_domain="home.lan"
export TF_VAR_fedora_template_vmid="9041"

# --- CLOUDFLARE TUNNELS (OPTIONAL) ---
# export CF_TUNNEL_TOKEN_DEV="your-dev-tunnel-token"
# export CF_TUNNEL_TOKEN_PROJECTS="your-projects-tunnel-token"
